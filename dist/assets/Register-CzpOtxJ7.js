import{j as e,r as m,a as b}from"./index-BLzcrPts.js";import{c as P,I as l,B as j}from"./Button-hkS0wjbY.js";import{u as L}from"./usePageTitle-BXE2Z9c8.js";function A({steps:o,current:n}){return e.jsx("div",{className:"flex items-center justify-between gap-4 w-full overflow-x-auto px-2 py-3",children:o.map((s,v)=>{const c=v+1,p=c===n,r=c<n;return e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-[120px]",children:[e.jsx("div",{className:P("flex items-center justify-center w-10 h-10 rounded-full text-sm font-semibold shrink-0",r?"bg-indigo-600 text-white shadow":p?"bg-white border border-indigo-500 text-indigo-600 shadow-sm":"bg-white/80 text-gray-600 border border-gray-200"),children:r?"✓":c}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:P("text-sm font-medium",p?"text-indigo-700":"text-gray-600"),children:s.label}),e.jsx("span",{className:"text-xs text-gray-400",children:s.sub})]})]},s.label)})})}const F=["Nigeria","United States","United Kingdom","Ghana","Kenya","South Africa"],I=[{label:"Account",sub:"Email & username"},{label:"Verify",sub:"OTP verification"},{label:"Complete",sub:"Password & profile"},{label:"Done",sub:"All set"}];function M(){const[o,n]=m.useState(1),[s,v]=m.useState({email:"",first_name:"",last_name:"",username:""}),[c,p]=m.useState(""),[r,w]=m.useState({email:"",password:"",confirm_password:"",referral_code_input:"",phone_number:"",country:""}),[h,i]=m.useState(!1),[x,a]=m.useState(""),[O,T]=m.useState(""),g=t=>v({...s,[t.target.name]:t.target.value}),u=t=>w({...r,[t.target.name]:t.target.value}),k=async t=>{if(t?.preventDefault(),a(""),!s.email||!s.username){a("Please provide a valid email and username.");return}i(!0);try{await b.signup({...s}),w(d=>({...d,email:s.email})),n(2)}catch(d){a(d?.message||"Failed to send OTP. Try again.")}finally{i(!1)}},R=async t=>{if(t?.preventDefault(),a(""),!c||!s.email){a("Enter the OTP sent to your email.");return}i(!0);try{await b.verifyOtp({email:s.email,otp:c}),n(3)}catch(d){a(d?.message||"Invalid or expired OTP.")}finally{i(!1)}},B=async t=>{t?.preventDefault(),a("");const{email:d,password:f,confirm_password:E,referral_code_input:C,phone_number:S,country:_}=r;if(!f||f.length<6){a("Password must be at least 6 characters.");return}if(f!==E){a("Passwords do not match.");return}if(!S||!_){a("Please provide phone number and country.");return}i(!0);try{const y={email:d,password:f,phone_number:S,country:_};C?.trim()&&(y.referral_code_input=C),await b.completeRegistration(y),T("Registration successful! You can now login."),n(4)}catch(y){a(y?.message||"Failed to complete registration.")}finally{i(!1)}},D=async()=>{a(""),i(!0);try{await b.signup({email:s.email})}catch(t){a(t?.message||"Failed to resend OTP.")}finally{i(!1)}},N="w-full max-w-2xl mx-auto";return e.jsxs("div",{className:"flex flex-col items-center w-full gap-6",children:[e.jsx("div",{className:N,children:e.jsx(A,{steps:I,current:o})}),e.jsx("div",{className:`${N} bg-white rounded-2xl shadow-md border border-gray-100 overflow-hidden`,children:e.jsxs("div",{className:"p-8",children:[o===1&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Create your account"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Enter your email and a preferred username — we’ll send an OTP to verify."}),x&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:x}),e.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Email",name:"email",type:"email",value:s.email,onChange:g,placeholder:"you@example.com"}),e.jsx(l,{label:"Username",name:"username",type:"text",value:s.username,onChange:g,placeholder:"display username"}),e.jsx(l,{label:"First name",name:"first_name",type:"text",value:s.first_name,onChange:g,placeholder:"John"}),e.jsx(l,{label:"Last name",name:"last_name",type:"text",value:s.last_name,onChange:g,placeholder:"Doe"}),e.jsxs("div",{className:"md:col-span-2 flex items-center justify-between gap-4 mt-1",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"By continuing you agree to our terms & privacy."}),e.jsx("div",{className:"w-44",children:e.jsx(j,{type:"submit",variant:"primary",loading:h,children:"Send OTP"})})]})]})]}),o===2&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Verify OTP"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["We sent an OTP to ",e.jsx("span",{className:"font-medium",children:s.email}),". Enter it below."]}),x&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:x}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsx("div",{className:"max-w-xs",children:e.jsx(l,{label:"One-time code (OTP)",name:"otp",type:"text",value:c,onChange:t=>p(t.target.value),placeholder:"1234"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(j,{type:"submit",variant:"primary",loading:h,children:"Verify OTP"})}),e.jsx("button",{type:"button",onClick:D,className:"text-sm text-indigo-600 hover:underline disabled:opacity-50",disabled:h,children:"Resend OTP"})]}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:e.jsx("button",{type:"button",className:"text-sm text-gray-500 hover:text-gray-700",onClick:()=>n(1),children:"← Back"})})]})]}),o===3&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Complete Registration"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Set a secure password and profile details."}),x&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:x}),e.jsxs("form",{onSubmit:B,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Password",name:"password",type:"password",value:r.password,onChange:u,placeholder:"Create a password"}),e.jsx(l,{label:"Confirm password",name:"confirm_password",type:"password",value:r.confirm_password,onChange:u,placeholder:"Repeat password"}),e.jsx(l,{label:"Phone number",name:"phone_number",type:"text",value:r.phone_number,onChange:u,placeholder:"+2348012345678"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsxs("select",{name:"country",value:r.country,onChange:u,className:"w-full rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select country"}),F.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsx(l,{label:"Referral code (optional)",name:"referral_code_input",type:"text",value:r.referral_code_input,onChange:u,placeholder:"ABC123"}),e.jsxs("div",{className:"md:col-span-2 flex items-center justify-between mt-1",children:[e.jsx("button",{type:"button",className:"text-sm text-gray-500 hover:text-gray-700",onClick:()=>n(2),children:"← Back"}),e.jsx("div",{className:"w-44",children:e.jsx(j,{type:"submit",variant:"primary",loading:h,children:"Complete Signup"})})]})]})]}),o===4&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-50 mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"You're all set!"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:O||"Registration completed successfully."}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(j,{variant:"primary",onClick:()=>window.location.href="/login",children:"Go to Login"}),e.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-700",onClick:()=>n(3),children:"Back"})]})]})]})})]})}function W(){return L("Register"),e.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gradient-to-br from-gray-50 to-white px-4 py-16",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8 text-center",children:[e.jsx("img",{src:"/logo.png",alt:"Bitexly",className:"w-14 h-14 mb-3 drop-shadow-sm"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bitexly"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create an account to get started"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(M,{})})]})})}export{W as default};
